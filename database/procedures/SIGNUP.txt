CREATE OR REPLACE PROCEDURE "SIGNUP" (FIRST_NAME IN VARCHAR2,LAST_NAME IN VARCHAR2,EMAIL_ADDRESS IN VARCHAR2,PASSWORD IN VARCHAR2,STATUS OUT VARCHAR2) AS
HASHED_PASS VARCHAR2(100);
COUNT_USER NUMBER;
BEGIN
	HASHED_PASS := dbms_crypto.hash (utl_i18n.string_to_raw (PASSWORD, 'AL32UTF8'), dbms_crypto.hash_sh1);
	SELECT COUNT(*) INTO COUNT_USER FROM USERS;
	INSERT INTO Users(user_id,first_name,last_name,email_address,password,profile_picture,registration_date) VALUES (COUNT_USER+1,FIRST_NAME,LAST_NAME,EMAIL_ADDRESS,HASHED_PASS,NULL,SYSDATE);
STATUS := 'SUCCESSFUL';
EXCEPTION
 WHEN DUP_VAL_ON_INDEX THEN 
	STATUS := 'NOT UNIQUE';
	WHEN OTHERS THEN 
	STATUS := 'UNKNOWN ERROR';
END;