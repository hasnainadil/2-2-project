CREATE OR REPLACE PROCEDURE "USER_DIETARY"(ID IN NUMBER, STATUS OUT VARCHAR2, INFO_RC OUT SYS_REFCURSOR) AS
BEGIN
	OPEN INFO_RC FOR
SELECT  D.DIETARY_ID AS DIETARY_ID,D.RESTRICTION AS RESTRICTION
FROM  USERS U 
LEFT JOIN USER_DIETARY_RESTRICTIONS UD ON UD.USER_ID = U.USER_ID
LEFT JOIN DIETARY_RESTRICTIONS D ON D.DIETARY_ID = UD.DIETARY_ID
WHERE U.USER_ID = ID;
STATUS := 'SUCCESSFUL';
EXCEPTION
	WHEN NO_DATA_FOUND THEN
	STATUS := 'NO DATA FOUND';
	WHEN OTHERS THEN
	STATUS := 'UNKNOWN ERROR';
END;