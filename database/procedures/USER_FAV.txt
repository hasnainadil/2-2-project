CREATE OR REPLACE PROCEDURE "USER_FAV"(ID IN NUMBER, STATUS OUT VARCHAR2, INFO_RC OUT SYS_REFCURSOR) AS
BEGIN
	OPEN INFO_RC FOR
SELECT R.RECIPE_ID AS RECIPE_ID,R.TITLE as RECIPE_TITLE,(SELECT (FIRST_NAME||' '||LAST_NAME) FROM RECIPES WHERE USER_ID = U.USER_ID)  AS PUBLISHER_NAME,(SELECT USER_ID FROM RECIPES WHERE USER_ID = U.USER_ID) AS PUBLISHER_ID
FROM  USERS U LEFT JOIN FAVOURITE F ON U.USER_ID = F.USER_ID
LEFT JOIN RECIPES R ON R.RECIPE_ID = F.RECIPE_ID 
WHERE U.USER_ID = ID;
STATUS := 'SUCCESSFUL';
EXCEPTION
	WHEN NO_DATA_FOUND THEN
	STATUS := 'NO DATA FOUND';
	WHEN OTHERS THEN
	STATUS := 'UNKNOWN ERROR';
END;